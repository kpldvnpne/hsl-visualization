<html>
  <head>
    <title>HSL Visualization</title>
    <style>
      *, *:before, *:after {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
      }

      body {
        margin: 20px;
      }

      .container {
        display: flex;
        flex-direction: column;
        align-items: center;

        float: left;
      }

      #hueInput {
        position: relative;
        width: 200px;
        height: 200px;
        background-color: white;
        border-radius: 50%;
        border: 10px solid transparent;
        background-clip: content-box;
      }

      #hueInput::after {
       position: absolute;
       top: -10px;
       left:-10px;
       right: -10px;
       bottom: -10px;
       border-radius: 50%;
       content: '';
       background: conic-gradient(hsl(0, 100%, 50%), hsl(120, 100%, 50%), hsl(240, 100%, 50%), hsl(360, 100%, 50%)), red;
       z-index: -1;
      }

      #pointer {
        display: block;
        cursor: pointer;
        position: absolute;
        top: -10px;
        left: 90px;
        color: red;
        font-size: 25px;
        text-shadow: 0 0 5px black;

        transform: translate(-50%, -50%) rotate(90deg);

        /* make unselectable */
        user-select: none;
      }

      #pointer:active {
        text-shadow: none;
      }

      #hueValue {
        border-radius: 5px;
        margin: 20px;
        border: 2px solid #5f9ea0;
        height: 30px;
        font-size: 20px;
        width: 70px;
        text-align: center;
      }

      #hueValue:hover, #hueValue:active {
        border: 2px solid #6495ed;
      }

      #saturationContainer {
        border: 1px dotted black;
      }

      #saturationInput {
        position: relative;
        margin: 0 20px;
        width: 30px;
        height: 200px;
        background-color: red;
      }

      #left-pointer, #right-pointer {
        position: absolute;
        top: 100px;
        font-size: 30px;
        line-height: 30px;

        color: hsl(0, 100%, 50%);
        text-shadow: 0 0 5px black;
      }

      #left-pointer {
        transform: translate(-50%, -50%);
      }

      #right-pointer {
        transform: translate(50%, -50%) rotate(180deg);
      }

    </style>
  </head>

  <body>
    <div id="hueContainer" class="container">
      <div id="hueInput">
        <div id="pointer">➤</div>
      </div>

      <input id="hueValue" value="0" type="text"/>
    </div>

    <div id="saturationContainer" class="container">
      <div id="saturationInput">
        <div id="left-pointer">➤</div>
        <div id="right-pointer">➤</div>
      </div>
    </div>

    <script>
      "use strict";


      let pointer = document.querySelector("#pointer");
      let radius = pointer.parentElement.offsetWidth / 2;

      let hueInput = document.querySelector("#hueInput");
      let hueValue = document.querySelector("#hueValue");

      pointer.onmousedown = function (event) {

        function onMouseMove(ev) {
          let mousePosX = ev.pageX - pointer.parentElement.offsetLeft;
          let mousePosY = ev.pageY - pointer.parentElement.offsetTop;

          mousePosX -= pointer.parentElement.offsetWidth / 2;
          mousePosY -= pointer.parentElement.offsetHeight / 2;
          mousePosY = -mousePosY;

          let theta = Math.atan2(mousePosX, mousePosY);

          let posX = Math.sin(theta) * radius - 10;
          let posY = Math.cos(theta) * radius + 10;
          posY = -posY;
          posX += radius;
          posY += radius;

          let thetaInDegrees = theta * 180 / Math.PI;
          if (thetaInDegrees < 0) {
            thetaInDegrees += 360;
          }
          hueValue.value = thetaInDegrees.toFixed(2);

          pointer.style.color = "hsl(" + thetaInDegrees + ", 100%, 50%)";
          pointer.style.left = posX + "px";
          pointer.style.top = posY + "px";
          pointer.style.transform = "translate(-50%, -50%) rotate(" + (theta + Math.PI / 2)  + "rad)"; 
        }

        hueInput.addEventListener("mousemove", onMouseMove);

        function removeMouseMove() {
          hueInput.removeEventListener("mousemove", onMouseMove);
          // hueInput.onmousemove = null;
        }

        hueInput.onmouseup = function() {
          removeMouseMove();
          pointer.onmouseup = null;
        }

        hueInput.onmouseleave = function() {
          removeMouseMove();
          hueInput.onmouseleave = null;
        }
      }
    </script>
  </body>
</html>